<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8" />
<title>Downward Edges</title>
<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles.css') }}">
<script src="https://d3js.org/d3.v6.min.js"></script>
<script src="http://marvl.infotech.monash.edu/webcola/cola.min.js"></script>
<script type="text/javascript" src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script src="{{url_for('static', filename='pipeline_viewer.js')}}"></script> 
</head>

<body>
    <a href="../index.html">cola.js home</a>
<h1>Kotekan Pipeline</h1>
<script>
    var pipeline = new PipelineViewer();
    var svg = pipeline.init_svg();

    // Replace "&#39;" chars as single quote "'"
    var rawData =  "{{data.json()}}".split('&#39;').join('"');
    // Add double quotes to None elements ('None') then parse json into javascript object
    var buffers = jQuery.parseJSON(rawData.split('None').join('"None"'));
    // Get buffer names
    var bufNames = Object.keys(buffers);

    pipeline.parse_data(buffers, bufNames);
    pipeline.create_objs();
    pipeline.start_buff_ult(bufNames, buffers);

    function isIE() { return ((navigator.appName == 'Microsoft Internet Explorer') || ((navigator.appName == 'Netscape') && (new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})").exec(navigator.userAgent) != null))); }
</script>
</body>
</html>
