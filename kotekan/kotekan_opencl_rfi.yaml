---
type: config
system:
  #mode: gpu_test
  mode: pathfinder
  log_level: 3
num_elements: 256
num_adjusted_elements: 256
num_local_freq: 8
num_adjusted_local_freq: 8
num_total_freq: 64
num_blocks: 36
block_size: 32
samples_per_data_set: 32768
num_data_sets: 1
buffer_depth: 1
num_gpu_frames: 64
num_links: 8
link_map: [0,0,0,0,0,0,0,0]
num_gpus: 1
cpu_affinity: [4,5,6,7]
enable_gating: false
sk_step: 256
rfi_sensitivity: 3
rfi_zero: false
  
gen_data:
  type: const
  value: 153
  test_data_gen_0:
    kotekan_process: testDataGen
    network_out_buf: gpu_input_buffer_0

gpu:
  commands:
  - name: input_data_stage
    kernel: ''
  - name: offset_accumulator
    kernel: "../lib/opencl/kernels/offset_accumulator.cl"
  - name: preseed_multifreq
    kernel: "../lib/opencl/kernels/preseed_multifreq.cl"
  - name: pairwise_correlator
    kernel: "../lib/opencl/kernels/pairwise_correlator.cl"
  - name: rfi_kernel
    kernel: "../lib/opencl/kernels/rfi_chime.cl"
  - name: output_rfi
    kernel: ''
  ts_element_offset: 0
  ts_num_elem_to_shift: 0
  ts_samples_to_shift: 0
  use_timeshift: 0
  enable_beamforming: false
  gpu_0:
    kotekan_process: clProcess
    gpu_id: 0
    network_buffer: gpu_input_buffer_0
    output_buffer: gpu_output_buffer_0
    beam_out_buf: beam_output_buffer_0
    rfi_out_buf: rfi_output_buffer_0

null_0:
  kotekan_process: nullProcess
  in_buf: gpu_input_buffer_0
null_1:
  kotekan_process: nullProcess
  in_buf: gpu_output_buffer_0
#null_2:
#  kotekan_process: nullProcess
#  in_buf: rfi_output_buffer_0

rfiBroadcast:
  kotekan_process: rfiBroadcast
  destination_port: 2900
  destination_ip: 192.168.52.174
  destination_protocol: UDP
  frames_per_packet: 128
  waterfall_request_delay: 30 #seconds
  rfi_buf: rfi_output_buffer_0

#rfiRecorder:
#  kotekan_process: rfiRecorder
#  rfi_buf: rfi_output_buffer_0


buffer_status:
  kotekan_process: bufferStatus
  time_delay: 1000000 #microseconds
