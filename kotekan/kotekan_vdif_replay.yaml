---
type: config
# Logging level can be one of:
# OFF, ERROR, WARN, INFO, DEBUG, DEBUG2 (case insensitive)
# Note DEBUG and DEBUG2 require a build with (-DCMAKE_BUILD_TYPE=Debug)
log_level: info

instrument_name: aro

#shared by power & network_stream
integration_length: 8192
num_freq: 1024
num_elements: 2
samples_per_data_set: 32768
#samples_per_data_set: 65536
buffer_depth: 10
num_links: 8
timesamples_per_packet: 2
cpu_affinity: [8,9,10,11]
num_disks: 10
sk_step: 1024
#If you change this to False remember to  
#change the rfi_out_buf size accordingly
# (i.e multiply it by num_elements)
RFI_combined: True
waterfallX: 1024

meta_pool:
  kotekan_metadata_pool: chimeMetadata
  num_metadata_objects: 5 * num_disks * buffer_depth

vdif_input_buf:
  kotekan_buffer: standard
  metadata_pool: meta_pool
  num_frames: buffer_depth * num_disks
  vdif_header_size: 32
  frame_size: samples_per_data_set * num_elements * (num_freq + vdif_header_size) 

rfi_out_buf:
  kotekan_buffer: standard
  metadata_pool: meta_pool
  num_frames: buffer_depth * num_disks
  float_size: 4
#If combining inputs
  frame_size: float_size * num_freq * samples_per_data_set / sk_step
#If not combining inputs
#  frame_size: float_size * num_freq * samples_per_data_set * num_elements / sk_step


#output_power_buf:
#  kotekan_buffer: standard
#  metadata_pool: meta_pool
#  num_frames: buffer_depth
#  sizeof_float: 4
#  frame_size: (samples_per_data_set/integration_length) * (num_freq + 1) * num_elements * sizeof_float

replay:
  kotekan_process: nDiskFileRead
  disk_base: /drives/
  disk_set: D
  out_buf: vdif_input_buf
  starting_file_index: 0
  capture: 20170805T155218Z_aro_vdif

RFI:
  kotekan_process: rfiVDIF
  vdif_in: vdif_input_buf
  rfi_out: rfi_out_buf

rfiBroadcast:
  kotekan_process: rfiBroadcastVDIF
  rfi_in: rfi_out_buf
  destination_port: 41215
  destination_ip: 127.0.0.1
  destination_protocol: UDP

#power:
#  kotekan_process: computeDualpolPower
#  rfi_removal: False
#  rfi_sensitivity: 3
#  rfi_backfill: False
#  vdif_in_buf: vdif_input_buf
#  power_out_buf: output_power_buf

#network_stream:
#  kotekan_process: networkPowerStream
#  power_in_buf: output_power_buf
#  destination_port: 2051
#  destination_ip: 127.0.0.1
#  destination_protocol: TCP

#buffer_status:
#  kotekan_process: bufferStatus
# time_delay: 1000000 #microseconds
