---
type: config
log_level: DEBUG
num_elements: 2048
num_prod: 2098176
num_local_freq: 1
udp_packet_size: 4928
num_data_sets: 1
samples_per_data_set: 32768
buffer_depth: 2
num_gpu_frames: 128
block_size: 32
cpu_affinity: [0,1,2,3,4,5,6,7,8,9,10,11]

# Metadata pool
#main_pool:
#  kotekan_metadata_pool: chimeMetadata
#  num_metadata_objects: 5 * buffer_depth

vis_pool:
  kotekan_metadata_pool: visMetadata
  num_metadata_objects: 5 * buffer_depth

# Buffers
#gpu_data_buffer:
#  kotekan_buffer: standard
#  metadata_pool: main_pool
#  num_frames: buffer_depth
#  sizeof_int: 4
#  frame_size: sizeof_int * num_local_freq * ((num_elements * num_elements) + (num_elements * block_size))

vis_buffer:
  kotekan_buffer: standard
  metadata_pool: vis_pool
  num_frames: buffer_depth
  sizeof_int: 4
  frame_size: 2 * sizeof_int * num_local_freq * num_elements * num_elements

# Kotekan processes
#file_read:
#  kotekan_process: rawFileRead
#  buf: gpu_data_buffer
#  base_dir: ../../../data/
#  file_ext: dump
#  file_name: cnDg5_corr_gpu0

fake_vis:
  kotekan_process: fakeVis
  output_buffer: vis_buffer
  num_eigenvectors: 4
  freq: [250,256,512,768]
  cadence: 10.

vis_debug:
  kotekan_process: visDebug
  buffer: vis_buffer

# I am not sure we have more than one output
# buffer here...
freq_split:
  kotekan_process: freqSplit
  input_buffer: vis_buffer
  output_buffers:
      - vis_buffer
  num_eigenvectors: 4

hdf5_writer:
  kotekan_process: visWriter
  buffer: vis_buffer
  num_freq: 4
  enabled_chunks: [238, 250, 278]
  per_node_instrument: true

